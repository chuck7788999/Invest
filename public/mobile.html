<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>KT Cloud 투자 평가</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap">
  <link rel="stylesheet" href="css/mobile.css">
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
  <!-- 에러 팝업 -->
  <div class="error-popup-overlay" id="error-popup-overlay" onclick="closeErrorPopup(event)">
    <div class="error-popup">
      <div class="error-popup-icon" id="error-popup-icon"></div>
      <div class="error-popup-title" id="error-popup-title">제출 불가</div>
      <div class="error-popup-message" id="error-popup-message">오류 메시지</div>
      <button class="error-popup-btn" onclick="closeErrorPopup()">확인</button>
    </div>
  </div>

  <div class="container">
    <!-- 헤더 -->
    <header class="header">
      <div class="logo">kt cloud 2026</div>
      <h1 class="title">비즈니스 아키텍트 투자 평가</h1>
    </header>

    <!-- 에러 메시지 -->
    <div class="error-message" id="error-message"></div>

    <!-- 로그인 화면 -->
    <div id="login-screen">
      <div class="login-icon">💼</div>
      <h2 class="login-title">평가자 로그인</h2>
      <p class="login-desc">성함을 입력하고 평가에 참여해주세요</p>

      <div class="input-group">
        <label class="input-label">성함</label>
        <input type="text" class="input-field" id="evaluator-name"
               placeholder="예: 홍길동님" autocomplete="off">
      </div>

      <button class="btn-primary" id="join-btn" onclick="joinEvaluation()">
        평가 참여하기
      </button>
    </div>

    <!-- 대기 화면 -->
    <div id="waiting-screen">
      <div class="waiting-icon">⏳</div>
      <h2 class="waiting-title">평가 대기 중</h2>
      <p class="waiting-desc">관리자가 평가를 시작하면<br>자동으로 평가 화면이 표시됩니다</p>

      <div class="user-info">
        <div class="user-name" id="display-name"></div>
        <div class="user-status">접속 완료</div>
      </div>

      <button type="button" class="btn-logout" onclick="logout()">다른 계정으로 로그인</button>
    </div>

    <!-- 평가 화면 -->
    <div id="evaluation-screen">
      <!-- 예산 가이드 -->
      <div class="budget-guide">
        <div class="budget-guide-title">투자 안내</div>
        <div class="budget-guide-text">
          총 <strong style="color:#ffd700">10억원</strong>을 4개 팀에 배분해주세요.<br>
          각 팀에 대한 <strong style="color:#ffd700">10자 이상</strong>의 피드백은 필수입니다.
        </div>
      </div>

      <div class="eval-progress">
        <div class="eval-progress-text">
          각 팀에 투자할 금액을 결정해주세요 (0~10억)
        </div>
        <div class="eval-progress-bar">
          <div class="eval-progress-fill" id="eval-progress-fill" style="width: 0%"></div>
        </div>
      </div>

      <div id="teams-container">
        <!-- 팀 평가 카드가 동적으로 생성됨 -->
      </div>

      <div class="submit-section">
        <div class="total-investment" id="total-investment-box">
          <div class="total-label">총 투자 금액 (정확히 10억원 필요)</div>
          <div class="total-value"><span id="total-amount">0</span>억원 / 10억원</div>
          <div class="budget-status" id="budget-status"></div>
        </div>
        <button class="btn-primary" id="submit-btn" onclick="submitEvaluation()">
          평가 제출하기
        </button>
      </div>
    </div>

    <!-- 완료 화면 -->
    <div id="complete-screen">
      <div class="complete-icon">🎉</div>
      <h2 class="complete-title">평가 완료!</h2>
      <p class="complete-desc">결과 발표를 기다려 주세요</p>

      <div class="complete-summary">
        <div class="summary-title">내 투자 내역</div>
        <div id="summary-list">
          <!-- 요약 항목이 동적으로 생성됨 -->
        </div>
      </div>
    </div>
  </div>

  <script src="js/mobile.js"></script>
</body>
</html>
